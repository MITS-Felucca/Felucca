<div class="card shadow p-3 mb-5 bg-white rounded" *ngIf="schema" >
  <div class="card-header bg-primary text-white">
    {{schema.toolName}}
  </div>
  <div class="card-body">
    <h6 class="card-subtitle mb-2 text-muted">{{schema.isPharos == true ? "Pharos Tool" : "Not Pharos Tool"}}</h6>
  <form (ngSubmit) = "onSubmit()" [formGroup]="form">
    <div class="card shadow p-3 mb-5 bg-white rounded" *ngFor="let argumentClass of schema.argumentClasses">
      <div class="card-body">
          <div class="p-3 mb-2 bg-info text-white">
        {{argumentClass.name}}
      </div>
      <table class="table table-striped" style="width: 100%">
        <colgroup>
        <col span="1" style="width: 20%;">
        <col span="1" style="width: 60%;">
        <col span="1" style="width: 20%;">
      </colgroup>
    
      <thead>
        <th class="argument">Argument</th>
        <th class="comment">Comment</th>
        <th class="input">Input</th>
      </thead>
      <tbody>
        <tr *ngFor="let argument of argumentClass.arguments">
          <td> 
            <span *ngIf="argument.abbreviation !== ''">
              {{argument.abbreviation}}
            </span>
            <span *ngIf="argument.fullName !== '' && argument.abbreviation === ''">
              {{argument.fullName}}
            </span>
            <span *ngIf="argument.fullName !== '' && argument.abbreviation !== ''">
              ({{argument.fullName}})
            </span>
          </td>
          <td> {{argument.description}} </td>
          <td [ngSwitch]="argument.argumentType">
            <!-- <div>
              <input *ngSwitchCase="argumentType.InputFile" type="file" (change) = "onFileChange($event, argument.key)">
            </div> -->
            <div class="custom-file" *ngSwitchCase="argumentType.InputFile">
              <input #fileInput type="file" class="custom-file-input" id="customFile" (change) = "onFileChange($event, argument.key)">
              <!-- <label class="custom-file-label" for="customFile">{{form.get("inputFile")[argument.key]}}</label> -->
              <label class="custom-file-label" for="customFile" style="margin:0px 0px 0px 0px">{{ this.form.get(['inputFile', argument.key]).value === '' ? 'Choose a file' : this.form.get(['inputFile', argument.key]).value }}</label>

              <button [disabled]="this.form.get(['inputFile', argument.key]).pristine" class="btn btn-primary" type="button" (click)="fileClear(argument.key)">Refresh</button>
            </div>
            <div formGroupName="outputFile">
              <input [formControlName]="argument.key" *ngSwitchCase="argumentType.OutputFile" type="checkbox">
            </div>
            <div formGroupName="inputFlag">
              <input [formControlName]="argument.key" *ngSwitchCase="argumentType.InputFlag" type="checkbox">
            </div>
            <div formGroupName="inputText">
              <input [formControlName]="argument.key" *ngSwitchCase="argumentType.InputText" type="Text">
            </div>
          </td>
        </tr>
      </tbody>
    </table>
      </div>
    </div>

    <div class="form-group"> 
      <button [disabled]="!form.valid" class="btn btn-success btn-lg float-right rounded-lg" type="submit" style="width:150px">Save</button> 
      <button class="btn btn-success btn-lg float-right rounded-lg" type="button" (click)="refreshForm()" style="width:150px">Refresh</button> 
    </div> 
</form>
</div>
</div>

